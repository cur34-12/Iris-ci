/*!
 * CIFullCalendar v3
 * Docs & License: http://www.cifullcalendar.com
 * (c) 2016 Sir.Dre
 */
 !function(e){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],e);else if("object"==typeof exports)e(require("jquery"),require("moment"),require("google.maps.Geocoder"));else{if("undefined"==typeof google.maps.Geocoder)throw"CIFullCalendar requires Gmaps to be loaded first";if("undefined"==typeof jQuery)throw"CIFullCalendar requires jQuery to be loaded first";if("undefined"==typeof moment)throw"CIFullCalendar requires Moment.js to be loaded first";e(jQuery,moment)}}(function(e,t){function a(){var e;for(t.updateLocale(N,{parentLocale:N}),t.tz(R).format(C),e=0;e<p.length;e++)p[e].render()}function n(){var n=t.tz(R),r=6*n.format(D),o=6*n.format(M)+r/60,l=n.format(x)%12/12*360+90+o/12;a();var i=n.format(C),d=n.format(T),s=n.format(_);n.zoneAbbr();e("#hour").css("transform","rotate("+l+"deg)"),e("#minute").css("transform","rotate("+o+"deg)"),e("#second").css("transform","rotate("+r+"deg)"),e("#ampm").text(d),e("#date").text(i),e("#timezone").text(R),e("#digiclock").text(s)}function r(){e("#calendar").fullCalendar("refetchEvents"),setTimeout(r,6e4)}function o(){n(),setTimeout(o,1e3)}function l(e){var t=typeof e;return"undefined"===t||("object"===t?null===e||0===Object.keys(e).length:[!1,0,"","0"].indexOf(e)>=0)}function i(t,a,n){var r=new google.maps.LatLng(t,a);if(l(n))e("#gmapsCanvas").attr("class","mapHidden"),e("#markers_ulat").attr("class","mapHidden"),e("#markers_ulng").attr("class","mapHidden");else{e("#gmapsCanvas").attr("class","map"),e("#markers_ulat").attr("class","map"),e("#markers_ulng").attr("class","map");var o={center:r,zoomControl:!0,zoom:19,mapTypeId:google.maps.MapTypeId.ROADMAP},i=new google.maps.Map(document.getElementById("gmapsCanvas"),o),d=(new google.maps.InfoWindow,new google.maps.Marker({position:r,map:i,draggable:!1}));google.maps.event.addListener(i,"idle",function(){google.maps.event.trigger(i,"resize"),i.setZoom(i.getZoom()-1),i.setZoom(i.getZoom()+1)}),google.maps.event.addListenerOnce(i,"center_changed",function(){window.setTimeout(function(){i.panTo(d.getPosition())},500)})}}function d(t){t.lengthComputable&&e("progress").attr({value:t.loaded,max:t.total})}function s(t,a){function n(){r()}function r(){4===u.readyState?(e("#loading").show(),d(4===u.readyState),(200===u.status||304===u.status||1223===u.status)&&e("#calendar").fullCalendar("refetchEvents")):e("#loading").hide()}function o(){var e=void 0;if(u.response?e=u.response:"text"!==u.responseType&&u.responseType||(e=u.responseText||u.responseXML),w)try{e=JSON.parse(e)}catch(t){}return e}function l(e){clearTimeout(m),e instanceof Error||(e=new Error(""+(e||"Unknown Error"))),e.statusCode=0,a(e,p)}function i(e){var t=u.headers;if(!e)return t;for(var a=e.split("\r\n"),n=0;n<a.length;n++){var r=a[n],o=r.indexOf(": ");if(o>0){var l=r.substring(0,o);r.substring(o,2);if(!u.setRequestHeader)throw new Error("Headers cannot be set on object");for(l in t)t.hasOwnProperty(l)&&u.setRequestHeader(l,t[l])}}return t}function s(){if(!f){var e;clearTimeout(m),e=void 0===u.status?200:1223===u.status?204:u.status;var n=p,r=null;0!==e?(n={body:o(),statusCode:e,method:g,headers:{},url:t,rawRequest:u},u.getAllResponseHeaders&&(n.headers=i(u.getAllResponseHeaders()))):r=new Error("Internal Error"),a(r,n.body)}}var u;if("undefined"==typeof a)try{u=new XMLHttpRequest}catch(c){throw new Error("argument missing")}(window.XMLHttpRequest||window.document||window.ActiveXObject)&&(u=new XMLHttpRequest);var f,m,p={body:void 0,headers:{},statusCode:0,method:g,url:t,rawRequest:u},g=u.method="GET",v=o(),h=u.headers,w=!0,C=0;return w&&"GET"!==g&&"HEAD"!==g&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json")||(h["Access-Control-Allow-Methods"]="GET")||(h["Access-Control-Allow-Origin"]="*"),v=JSON.stringify()),u.onreadystatechange=n,u.onload=s,u.onerror=l,u.onprogress=r,u.ontimeout=l,u.open(g,t,!0),C>0&&(m=setTimeout(function(){f=!0,u.abort("timeout");var e=new Error("timeout");e.code="ETIMEDOUT",l(e)},C)),u.send(v),u}e.cifullCalendar={version:"3.4.5",internalApiVersion:6};var u=e.fullCalendar;if(6!==u.internalApiVersion)return void u.warn("Incompatible with v"+u.version+" of the core.\nPlease see http://sirdre.com for more information.");var c=e.cifullCalendar=function(t){e.options=t,e.getRequest(),e.init()};c.DEFAULTS={locale:void 0},c.LOCALES=[],c.prototype.init=function(){e.businessDOW(),e.timedUpdate()},e.fn.cifullCalendar=function(t){var a,n=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=e(this),o=r.data("calendar");e.extend({},c.DEFAULTS,r.data(),"object"==typeof t&&t);if("string"==typeof t){if(e.inArray(t)<0)throw new Error("Unknown method: "+t);if(!o)return;a=o[t].apply(o,n),"destroy"===t&&r.removeData("calendar")}}),"undefined"==typeof a?this:a},e.fn.cifullCalendar.defaults=c.DEFAULTS,e.fn.cifullCalendar.locales=c.LOCALES;var f=(new google.maps.Geocoder,new google.maps.InfoWindow,new google.maps.LatLngBounds,e.extend(c.DEFAULTS,c.LOCALES.en)),m=new Date,p=(m.getDate(),m.getSeconds(),m.getMinutes(),m.getHours(),m.getDay(),m.getMonth(),m.getFullYear(),[]),g="YYYY-MM-DD HH:mm:ss",v="YYYYMMDD[T]HHmmss",h="dddd, MMMM Do, h:mm:ss a",w="YYYY-MM-DD",C="MMM DD",y="HH:mm:ss",b="h:mm:ss a",E="hh:mm a",_="h:mm:ss",x="h",M="mm",D="ss",T="a",L=new RegExp("(.+)"),k=window.location.pathname.replace(L,"./index.php/home/"),S=new Array,A=new Array,H=new Array;r();var j=1.35,I="",N="",q="",R="",O="start",Y="end",F="",z="",U="",G="",P="",W="",X="",Z="",Q="",V="",B="",J="",K="",$="",ee="",te="",ae="",ne="",re="",oe="",le="",ie="",de="",se="",ue="00:00:00",ce="24:00:00",fe="00:30:00",me=!1,pe=0,ge=!0,ve=!1,he=!1,we=!1,Ce=!0,ye=!0,be=!1,Ee=!0,_e=!0,xe=!1,Me=14,De="",Te="",Le="Export to ICS";return S[0]=k+"json",S[1]="",A[0]=k+"rjson",A[1]="",s(k+"get_timezone",function(e,t){l(t)||(q=t)}),s(k+"get_timezone2",function(e,a){l(a)||(R=a,F=t.tz(R).format(y))}),s(k+"get_defaultview",function(e,t){l(t)||(I=t)}),s(k+"get_header_left",function(e,t){l(t)||(z=t)}),s(k+"get_header_center",function(e,t){l(t)||(U=t)}),s(k+"get_header_right",function(e,t){l(t)||(G=t)}),s(k+"get_firstday",function(e,t){l(t)||(pe=t)}),s(k+"get_mintime",function(e,t){l(t)||(ue=t)}),s(k+"get_maxtime",function(e,t){l(t)||(ce=t)}),s(k+"get_slotduration",function(e,t){l(t)||(fe=t)}),s(k+"get_slotlabeling",function(e,t){l(t)||(me="true"==t?!0:!1)}),s(k+"get_slotlabelformat",function(e,t){l(t)||(E=t)}),s(k+"get_aspectratio",function(e,t){l(t)||(j=t!=j?t:j)}),s(k+"get_hiddendays",function(e,t){l(t)||(P=t.split(","),W=Number(P[0]),X=Number(P[1]),Z=Number(P[2]),Q=Number(P[3]),V=Number(P[4]),B=Number(P[5]),J=Number(P[6]))}),s(k+"get_businessstart",function(e,t){l(t)||(K=t)}),s(k+"get_businessend",function(e,t){l(t)||($=t)}),s(k+"get_businessdays",function(e,t){l(t)||(ee=t.split(","),te=Number(ee[0]),ae=Number(ee[1]),ne=Number(ee[2]),re=Number(ee[3]),oe=Number(ee[4]),le=Number(ee[5]),ie=Number(ee[6]))}),s(k+"get_weeknumbers",function(e,t){we="true"==t?!0:!1}),s(k+"get_eventlimit",function(e,t){Ce="true"==t?!0:!1}),s(k+"get_alldayslot",function(e,t){ye="true"==t?!0:!1}),s(k+"get_isrtl",function(e,t){be="true"==t?!0:!1}),s(k+"get_googlekey",function(t,a){l(a)||(De=e.trim(a))}),s(k+"get_schedulerkey",function(t,a){l(a)||(Te=e.trim(a))}),s(k+"get_lang",function(a,n){N=n,t.updateLocale(N,{parentLocale:N}),f=e.extend(c.DEFAULTS,c.LOCALES[N]),o(),e("#calendar").fullCalendar({defaultView:I,locale:N,minTime:""+ue,maxTime:""+ce,aspectRatio:j,defaultDate:m,timezone:q,now:q,weekNumberCalculation:q,scrollTime:F,nowIndicator:_e,header:{left:z,center:U,right:G},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},smallTimeFormat:E,slotLabel:me,isRTL:be,theme:xe,navLinks:Ee,allDaySlot:ye,fixedWeekCount:ve,firstDay:pe,weekends:ge,weekNumbers:we,hiddenDays:[W,X,Z,Q,V,B,J],businessHours:{start:K,end:$,dow:[te,ae,ne,re,oe,le,ie]},editable:he,eventStartEditable:he,eventDurationEditable:he,selectable:he,selectHelper:he,eventLimit:Ce,startParam:O,endParam:Y,googleCalendarApiKey:De,schedulerLicenseKey:Te,resourceAreaWidth:de,resourceLabelText:se,resources:A[0],eventSources:[S[0]],eventRender:function(t,a,n){a.attr("href","javascript:void(0);"),t.title.length>Me&&a.find(".fc-title").text(t.title.substr(0,Me)+"...").parent().attr("title",t.title),a.eq({event:t.id,title:t.title,resourceId:t.resourceId,daystart:e.fullCalendar.moment(t.start).format(g),dayend:e.fullCalendar.moment(t.end).format(g),backgroundColor:t.backgroundColor,borderColor:t.borderColor,textColor:t.textColor,description:t.description,url:t.url,allDay:t.allDay,auth:t.auth,rendering:t.rendering,overlap:t.overlap,recurdays:t.recurdays,recurend:t.recurend,location:t.location,latitude:t.longitude,longitude:t.longitude,category:t.category,filename:t.filename,filedata:t.filedata})},views:{basic:{slotDuration:fe},agenda:{slotDuration:fe},week:{slotDuration:fe},day:{slotDuration:fe}},eventClick:function(t,a,n){var r=t.start?e.fullCalendar.moment(t.start).format(g):e.fullCalendar.moment(m).format(g),o=t.end?e.fullCalendar.moment(t.end).format(g):e.fullCalendar.moment(t.start).format(g),l=e.fullCalendar.moment(r).format(w),d=e.fullCalendar.moment(o).format(w),s=d>l?e.fullCalendar.moment(o).format(h):e.fullCalendar.moment(o).format(b),u=e.fullCalendar.moment(r).format(h)+" - "+s,c=t.filename?'<a href="data:application/octet-stream;base64,'+t.filedata+'" download="'+t.filename+'" ><b>'+t.filename+"</b></a>":"",f=t.end?e.fullCalendar.moment(t.end).format(v):e.fullCalendar.moment(t.start).format(v),p=(o-r)/60/1e3,C=(p/60+p%60).toString(),y=parseFloat(t.latitude).toFixed(14),E=parseFloat(t.longitude).toFixed(14);i(y,E,t.location),e("#viewEventModal #gexport").html('<a href="//www.google.com/calendar/event?action=TEMPLATE&amp;text='+t.title+"&amp;dates="+e.fullCalendar.moment(r).format(v)+"/"+f+"&amp;details="+t.description+"&amp;location="+t.location+'&amp;sprop=website:" title="Google" target="_blank" ><i class="fa fa-google"></i></a>'),e("#viewEventModal #yexport").html("<a href='//calendar.yahoo.com/?v=60&DUR="+C.substr(0,2)+"&TITLE="+t.title+"&ST="+e.fullCalendar.moment(r).format(v)+"&in_loc="+t.location+"&DESC="+t.description+"&URL="+t.url+"' title='Yahoo' target='_blank' ><i class='fa fa-yahoo'></i></a>"),e("#viewEventModal #lexport").html("<a href='//calendar.live.com/calendar/calendar.aspx?rru=addevent&dtstart="+r+"&dtend="+o+"&summary="+t.title+"&description="+t.description+"&location="+t.location+"' title='Microsoft' target='_blank' ><i class='fa fa-windows'></i></a>"),e("#viewEventModal #Iexport").html("<a href='"+k+"export/"+t.id+"' title='"+Le+"' ><i class='fa fa-calendar-o'></i></a>"),e("#viewEventModal #ic_event_title").text(t.title),e("#viewEventModal #ic_event_desc").text(t.description),e("#viewEventModal #ic_event_urllink").text(t.url),e("#viewEventModal #ic_event_location").text(t.location),e("#viewEventModal #markers_ulng").text(E),e("#viewEventModal #markers_ulat").text(y),e("#viewEventModal #ic_event_allday").text(t.allDay),e("#viewEventModal #filename").html(c),e("#viewEventModal #when").text(u),e("#viewEventModal").modal("show")},eventMouseover:function(t,a,n){e(".fc-content").popover({trigger:"hover",html:!0,title:function(){return e(this).parent().find(".fc-title").html()},content:function(){return e(this).parent().find(".fc-description").html()},container:"body",placement:"top"})},loading:function(t){t?(e("#loading").show(),d(t)):e("#loading").hide()}})}),e("#cifcv").text(e.cifullCalendar.version),e("#fcv").text(e.fullCalendar.version),e("#loadEvents").on("click",function(t){t.preventDefault(),H[0]=k+"json",e("#calendar").fullCalendar("removeEventSource",S[0]),e("#calendar").fullCalendar("refetchEvents"),e("#calendar").fullCalendar("addEventSource",H[0]),e("#calendar").fullCalendar("refetchEvents"),S[0]=H[0]}),e("#title").off("keyup drop").on("keyup drop",function(t){var a=0;clearTimeout(a),a=setTimeout(function(){t.preventDefault();var a=e("#title").val();l(a)?(H[0]=k+"json",e("#calendar").fullCalendar("removeEventSource",S[0]),e("#calendar").fullCalendar("refetchEvents"),e("#calendar").fullCalendar("addEventSource",H[0]),e("#calendar").fullCalendar("refetchEvents"),S[0]=H[0]):(H[0]=k+"search?title="+a,e("#calendar").fullCalendar("removeEventSource",S[0]),e("#calendar").fullCalendar("refetchEvents"),e("#calendar").fullCalendar("addEventSource",H[0]),e("#calendar").fullCalendar("refetchEvents"),S[0]=H[0])},!0)}),e("#submitsearch").on("click",function(t){t.preventDefault();var a=e("#title").val();l(a)?(H[0]=k+"json",e("#calendar").fullCalendar("removeEventSource",S[0]),e("#calendar").fullCalendar("refetchEvents"),e("#calendar").fullCalendar("addEventSource",H[0]),e("#calendar").fullCalendar("refetchEvents"),S[0]=H[0]):(H[0]=k+"search?title="+a,e("#calendar").fullCalendar("removeEventSource",S[0]),e("#calendar").fullCalendar("refetchEvents"),e("#calendar").fullCalendar("addEventSource",H[0]),e("#calendar").fullCalendar("refetchEvents"),S[0]=H[0])}),c});